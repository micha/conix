<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <title>Canvas Test</title>
    <style type="text/css">
      canvas {
        float: left;
        border: 1px solid blue;
      }
      form {
        width: 40em;
        text-align: right;
      }
    </style>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="sylvester.js"></script>
    <script type="text/javascript" src="conix.js"></script>
    <script type="text/javascript">
      $(function() {

        var canvas = $("canvas").get()[0];
        var ctx = canvas.getContext("2d");

        var mesh = 6;

        function point(p) {
          console.log("point ["+p[0]+","+p[1]+"]");
          ctx.beginPath();
          ctx.arc(p[0], p[1], 3, 0, Math.PI*2, true);
          ctx.fill();
          return p;
        }

        function line(p1, p2) {
          console.log("line ["+p1[0]+","+p1[1]+"], ["+p2[0]+","+p2[1]+"]");
          ctx.beginPath();
          ctx.moveTo(p1[0], p1[1]);
          ctx.lineTo(p2[0], p2[1]);
          ctx.stroke();
        }

        $("form").submit(function() {
          ctx.clearRect(0, 0, 400, 400);

          var w = parseFloat($("input[name='width']").val());
          var h = parseFloat($("input[name='height']").val());
          var r = parseFloat($("input[name='rho']").val());

          mesh  = parseFloat($("input[name='grid']").val());

          var a = [ (400 - w) / 2, (400 - h) / 2 ];
          var c = [ a[0] + w, a[1] ];
          var b = [ a[0] + w, a[1] + h ];

          var conic = new Conic($V(a), $V(c), $V(b), r);

          return false;
        }).submit();

      });
    </script>
  </head>
  <body>
    <canvas id="test" width="400" height="400"></canvas>
    <form>
      <label>width  </label><input type=text name="width" value="100" /> <br />
      <label>height </label><input type=text name="height" value="100" /> <br />
      <label>k </label><input type=text name="rho" value="0.7" /> <br />
      <label>grid </label><input type=text name="grid" value="5" /> <br />
      <input type="submit" />
    </form>
  </body>
</html>
